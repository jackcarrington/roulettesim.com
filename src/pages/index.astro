---
import DefaultLayout from '@layouts/DefaultLayout.astro'
import Hero from '@components/Hero.astro'
import Feature from '@components/Feature.astro'
import VariantSelector from '@components/game/VariantSelector.astro'
import { api } from '../services/apiClient.ts';

let featuredGames = [];

try {
  const allGames = await api.getRouletteGames();
  featuredGames = allGames.slice(0, 3);
} catch (err) {
  console.error('Failed to load featured games:', err);
}

const title = 'Master Roulette - Practice & Learn';
const description = 'Learn roulette strategies and practice with authentic casino games. Master European, American, and French roulette variants with expert guidance.';
---

<DefaultLayout title={title} description={description}>
  <Hero />
  
  <section class="my-16">
    <div class="container">
      <h2 class="mb-8 text-4xl font-bold text-center">Practice Roulette Games</h2>
      <p class="text-xl text-gray-600 text-center max-w-3xl mx-auto mb-12">
        Master roulette with authentic casino games. Learn strategies and practice with real game mechanics from top providers.
      </p>
      
      <VariantSelector />
      
      <div class="cta-section text-center mt-12">
        <a 
          href="/games" 
          class="primary-cta bg-blue-600 text-white text-lg font-semibold px-8 py-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 inline-block"
        >
          Browse All Games
        </a>
      </div>
    </div>
  </section>

  <section class="my-16 bg-gray-50 py-16">
    <div class="container">
      <h2 class="mb-12 text-4xl font-bold text-center">Why Learn Roulette?</h2>
      <div class="grid grid-cols-1 gap-8 md:grid-cols-3">
        <Feature icon="lucide:target" title="Master the Odds">
          Understand probability and house edge differences between European (2.7%), French (1.35%), and American (5.26%) variants.
        </Feature>
        <Feature icon="lucide:brain" title="Strategic Thinking">
          Learn betting systems, bankroll management, and when to walk away. Practice makes perfect without financial risk.
        </Feature>
        <Feature icon="lucide:shield-check" title="Responsible Gaming">
          Learn to gamble responsibly with our educational approach. Understand risks before playing with real money.
        </Feature>
      </div>
    </div>
  </section>
</DefaultLayout>

<style>
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  @media (max-width: 768px) {
    .container {
      padding: 0 0.75rem;
    }
    
    .primary-cta {
      width: 100%;
      max-width: 300px;
    }
  }
</style>